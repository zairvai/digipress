{
	"AWSTemplateFormatVersion": "2010-09-09",
	"Description": "An auto-generated nested stack.",
	"Metadata": {},
	"Parameters": {
	  "AppSyncApiId": {
		"Type": "String",
		"Description": "The id of the AppSync API associated with this project."
	  },
	  "AppSyncApiName": {
		"Type": "String",
		"Description": "The name of the AppSync API",
		"Default": "AppSyncSimpleTransform"
	  },
	  "env": {
		"Type": "String",
		"Description": "The environment name. e.g. Dev, Test, or Production",
		"Default": "NONE"
	  },
	  "S3DeploymentBucket": {
		"Type": "String",
		"Description": "The S3 bucket containing all deployment assets for the project."
	  },
	  "S3DeploymentRootKey": {
		"Type": "String",
		"Description": "An S3 key relative to the S3DeploymentBucket that points to the root\nof the deployment directory."
	  }
	},
	"Resources": {
	  "EmptyResource": {
		"Type": "Custom::EmptyResource",
		"Condition": "AlwaysFalse"
	  },
	  "FunctionTableAppGetItem":{
		  "Type":"AWS::AppSync::FunctionConfiguration",
		  "Properties":{
			  "ApiId":{
				  "Ref":"AppSyncApiId"
			  },
			  "DataSourceName":"AppTable",
			  "Description":"Get item from Table App",
			  "FunctionVersion":"2018-05-29",
			  "Name":"TableAppGetItem",
			  "RequestMappingTemplateS3Location":{
				  "Fn::Sub":[
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.getItem.req.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  },
			  "ResponseMappingTemplateS3Location":{
				  "Fn::Sub": [
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.getItem.res.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  }
		  }
	  },
	  "FunctionTableAppPutItem":{
		  "Type":"AWS::AppSync::FunctionConfiguration",
		  "Properties":{
			  "ApiId":{
				  "Ref":"AppSyncApiId"
			  },
			  "DataSourceName":"AppTable",
			  "Description":"Put item to Table App",
			  "FunctionVersion":"2018-05-29",
			  "Name":"TableAppPutItem",
			  "RequestMappingTemplateS3Location":{
				  "Fn::Sub":[
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.putItem.req.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  },
			  "ResponseMappingTemplateS3Location":{
				  "Fn::Sub": [
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.putItem.res.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  }
		  }
	  },
	  "FunctionTableAppDeleteItem":{
		  "Type":"AWS::AppSync::FunctionConfiguration",
		  "Properties":{
			  "ApiId":{
				  "Ref":"AppSyncApiId"
			  },
			  "DataSourceName":"AppTable",
			  "Description":"Delete item from Table App",
			  "FunctionVersion":"2018-05-29",
			  "Name":"TableAppDeleteItem",
			  "RequestMappingTemplateS3Location":{
				  "Fn::Sub":[
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.deleteItem.req.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  },
			  "ResponseMappingTemplateS3Location":{
				  "Fn::Sub": [
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.deleteItem.res.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  }
		  }
	  },
	  "FunctionTableAppUpdateItem":{
		  "Type":"AWS::AppSync::FunctionConfiguration",
		  "Properties":{
			  "ApiId":{
				  "Ref":"AppSyncApiId"
			  },
			  "DataSourceName":"AppTable",
			  "Description":"Update item in Table App",
			  "FunctionVersion":"2018-05-29",
			  "Name":"TableAppUpdateItem",
			  "RequestMappingTemplateS3Location":{
				  "Fn::Sub":[
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.updateItem.req.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  },
			  "ResponseMappingTemplateS3Location":{
				  "Fn::Sub": [
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.updateItem.res.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  }
		  }
	  },
	  "FunctionTableAppBatchGetItem":{
		"Type":"AWS::AppSync::FunctionConfiguration",
		"Properties":{
			"ApiId":{
				"Ref":"AppSyncApiId"
			},
			"DataSourceName":"AppTable",
			"Description":"Get item in batch from Table App",
			"FunctionVersion":"2018-05-29",
			"Name":"TableAppBatchGetItem",
			"RequestMappingTemplateS3Location":{
				"Fn::Sub":[
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.batchGetItem.req.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			},
			"ResponseMappingTemplateS3Location":{
				"Fn::Sub": [
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.batchGetItem.res.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			}
		}
	},
	"FunctionIdentityManager":{
		"Type":"AWS::AppSync::FunctionConfiguration",
		"Properties":{
			"ApiId":{
				"Ref":"AppSyncApiId"
			},
			"DataSourceName":"IdentityManager",
			"Description":"Cognito Lambda Handler",
			"FunctionVersion":"2018-05-29",
			"Name":"FunctionIdentityManager",
			"RequestMappingTemplateS3Location":{
				"Fn::Sub":[
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.identityManager.req.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			},
			"ResponseMappingTemplateS3Location":{
				"Fn::Sub": [
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.identityManager.res.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			}
		}
	},
	"FunctionSearchManager":{
		"Type":"AWS::AppSync::FunctionConfiguration",
		"Properties":{
			"ApiId":{
				"Ref":"AppSyncApiId"
			},
			"DataSourceName":"SearchManager",
			"Description":"SearchManager Lambda Handler",
			"FunctionVersion":"2018-05-29",
			"Name":"FunctionSearchManager",
			"RequestMappingTemplateS3Location":{
				"Fn::Sub":[
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.searchManager.req.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			},
			"ResponseMappingTemplateS3Location":{
				"Fn::Sub": [
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.searchManager.res.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			}
		}
	},
	"FunctionAdminCreateUser":{
		"Type":"AWS::AppSync::FunctionConfiguration",
		"Properties":{
			"ApiId":{
				"Ref":"AppSyncApiId"
			},
			"DataSourceName":"AppTable",
			"Description":"Add user to DB After Identity Manager add to Cognito",
			"FunctionVersion":"2018-05-29",
			"Name":"FunctionAdminCreateUser",
			"RequestMappingTemplateS3Location":{
				"Fn::Sub":[
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.adminCreate.user.req.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			},
			"ResponseMappingTemplateS3Location":{
				"Fn::Sub": [
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.adminCreate.user.res.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			}
		}
	},
	"FunctionAdminCreateUserAccount":{
		"Type":"AWS::AppSync::FunctionConfiguration",
		"Properties":{
			"ApiId":{
				"Ref":"AppSyncApiId"
			},
			"DataSourceName":"AppTable",
			"Description":"Add user account access to DB After Identity Manager add to Cognito",
			"FunctionVersion":"2018-05-29",
			"Name":"FunctionAdminCreateUserAccount",
			"RequestMappingTemplateS3Location":{
				"Fn::Sub":[
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.adminCreateUserAccount.req.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			},
			"ResponseMappingTemplateS3Location":{
				"Fn::Sub": [
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Function.adminCreateUserAccount.res.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			}
		}
	},
	"MutationCreateAccountResolver":{
		  "Type":"AWS::AppSync::Resolver",
		  "Properties":{
			  "ApiId":{
				  "Ref":"AppSyncApiId"
			  },
			  "TypeName":"Mutation",
			  "FieldName":"createAccount",
			  "Kind":"PIPELINE",
			  "PipelineConfig":{
				  "Functions":[
					  {"Fn::GetAtt":["FunctionTableAppPutItem","FunctionId"]}
				  ]
			  },
			  "RequestMappingTemplateS3Location":{
				  "Fn::Sub":[
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Mutation.createAccount.req.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  },
			  "ResponseMappingTemplateS3Location":{
				  "Fn::Sub": [
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Mutation.createAccount.res.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  }
		  }
	  },
	  "MutationUpdateAccountResolver":{
		  "Type":"AWS::AppSync::Resolver",
		  "Properties":{
			  "ApiId":{
				  "Ref":"AppSyncApiId"
			  },
			  "TypeName":"Mutation",
			  "FieldName":"updateAccount",
			  "Kind":"PIPELINE",
			  "PipelineConfig":{
				  "Functions":[
					  {"Fn::GetAtt":["FunctionTableAppUpdateItem","FunctionId"]}
				  ]
			  },
			  "RequestMappingTemplateS3Location":{
				  "Fn::Sub":[
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Mutation.updateAccount.req.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  },
			  "ResponseMappingTemplateS3Location":{
				  "Fn::Sub": [
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Mutation.updateAccount.res.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  }
		  }
	  },
	  "MutationDeleteAccountResolver":{
		  "Type":"AWS::AppSync::Resolver",
		  "Properties":{
			  "ApiId":{
				  "Ref":"AppSyncApiId"
			  },
			  "TypeName":"Mutation",
			  "FieldName":"deleteAccount",
			  "Kind":"PIPELINE",
			  "PipelineConfig":{
				  "Functions":[
					  {"Fn::GetAtt":["FunctionTableAppDeleteItem","FunctionId"]}
				  ]
			  },
			  "RequestMappingTemplateS3Location":{
				  "Fn::Sub":[
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.deleteItem.req.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  },
			  "ResponseMappingTemplateS3Location":{
				  "Fn::Sub": [
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.deleteItem.res.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  }
		  }
	  },
	  "QueryGetAccountResolver":{
		  "Type":"AWS::AppSync::Resolver",
		  "Properties":{
			  "ApiId":{
				  "Ref":"AppSyncApiId"
			  },
			  "TypeName":"Query",
			  "FieldName":"getAccount",
			  "Kind":"PIPELINE",
			  "PipelineConfig":{
				  "Functions":[
					  {"Fn::GetAtt":["FunctionTableAppGetItem","FunctionId"]}
				  ]
			  },
			  "RequestMappingTemplateS3Location":{
				  "Fn::Sub":[
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.getItem.req.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  },
			  "ResponseMappingTemplateS3Location":{
				  "Fn::Sub": [
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.getItem.res.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  }
		  }
	  },
	  "QueryGetAccountByUniqueUrlResolver":{
		"Type":"AWS::AppSync::Resolver",
		"Properties":{
			"ApiId":{
				"Ref":"AppSyncApiId"
			},
			"TypeName":"Query",
			"FieldName":"getAccountByUniqueUrl",
			"Kind":"PIPELINE",
			"PipelineConfig":{
				"Functions":[
					{"Fn::GetAtt":["FunctionSearchManager","FunctionId"]},
					{"Fn::GetAtt":["FunctionTableAppGetItem","FunctionId"]}

				]
			},
			"RequestMappingTemplateS3Location":{
				"Fn::Sub":[
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Query.getAccountByUniqueUrl.req.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			},
			"ResponseMappingTemplateS3Location":{
				"Fn::Sub": [
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Query.getAccountByUniqueUrl.res.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			}
		}
	},
	  "QueryListAccountsResolver":{
		  "Type":"AWS::AppSync::Resolver",
		  "Properties":{
			  "ApiId":{
				  "Ref":"AppSyncApiId"
			  },
			  "DataSourceName":"SearchManager",
			  "TypeName":"Query",
			  "FieldName":"listAccounts",
			  "Kind":"UNIT",
			  "RequestMappingTemplateS3Location":{
				  "Fn::Sub":[
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Query.listAccounts.req.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  },
			  "ResponseMappingTemplateS3Location":{
				  "Fn::Sub": [
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Query.listAccounts.res.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  }
		  }
	  },
	  "AccountCreatedByResolver":{
		  "Type":"AWS::AppSync::Resolver",
		  "Properties":{
			  "ApiId":{
				  "Ref":"AppSyncApiId"
			  },
			  "TypeName":"Account",
			  "FieldName":"createdBy",
			  "Kind":"PIPELINE",
			  "PipelineConfig":{
				  "Functions":[
					  {"Fn::GetAtt":["FunctionTableAppGetItem","FunctionId"]}
				  ]
			  },
			  "RequestMappingTemplateS3Location":{
				  "Fn::Sub":[
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.createdBy.req.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  },
			  "ResponseMappingTemplateS3Location":{
				  "Fn::Sub": [
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.createdBy.res.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  }
		  }
	  },
	  "AccountUpdatedByResolver":{
		  "Type":"AWS::AppSync::Resolver",
		  "Properties":{
			  "ApiId":{
				  "Ref":"AppSyncApiId"
			  },
			  "TypeName":"Account",
			  "FieldName":"updatedBy",
			  "Kind":"PIPELINE",
			  "PipelineConfig":{
				  "Functions":[
					  {"Fn::GetAtt":["FunctionTableAppGetItem","FunctionId"]}
				  ]
			  },
			  "RequestMappingTemplateS3Location":{
				  "Fn::Sub":[
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.updatedBy.req.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  },
			  "ResponseMappingTemplateS3Location":{
				  "Fn::Sub": [
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.updatedBy.res.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  }
		  }
	  },
	  "AccountConnectionItemsResolver":{
		  "Type":"AWS::AppSync::Resolver",
		  "Properties":{
			  "ApiId":{
				  "Ref":"AppSyncApiId"
			  },
			  "TypeName":"AccountConnection",
			  "FieldName":"items",
			  "Kind":"PIPELINE",
			  "PipelineConfig":{
				  "Functions":[
					  {"Fn::GetAtt":["FunctionTableAppBatchGetItem","FunctionId"]}
				  ]
			  },
			  "RequestMappingTemplateS3Location":{
				  "Fn::Sub":[
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/ItemConnection.items.req.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  },
			  "ResponseMappingTemplateS3Location":{
				  "Fn::Sub": [
					  "s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/ItemConnection.items.res.vtl",
					  {
						  "S3DeploymentBucket": {
							  "Ref": "S3DeploymentBucket"
						  },
						  "S3DeploymentRootKey": {
							  "Ref": "S3DeploymentRootKey"
						  }
					  }
				  ]
			  }
		  }
	  },
	  "MutationCreateUserResolver":{
		"Type":"AWS::AppSync::Resolver",
		"Properties":{
			"ApiId":{
				"Ref":"AppSyncApiId"
			},
			"TypeName":"Mutation",
			"FieldName":"createUser",
			"Kind":"PIPELINE",
			"PipelineConfig":{
				"Functions":[
					{"Fn::GetAtt":["FunctionIdentityManager","FunctionId"]},
					{"Fn::GetAtt":["FunctionAdminCreateUser","FunctionId"]}

				]
			},
			"RequestMappingTemplateS3Location":{
				"Fn::Sub":[
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Mutation.createUser.req.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			},
			"ResponseMappingTemplateS3Location":{
				"Fn::Sub": [
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Mutation.createUser.res.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			}
		}
	},
	"MutationUpdateUserResolver":{
		"Type":"AWS::AppSync::Resolver",
		"Properties":{
			"ApiId":{
				"Ref":"AppSyncApiId"
			},
			"TypeName":"Mutation",
			"FieldName":"updateUser",
			"Kind":"PIPELINE",
			"PipelineConfig":{
				"Functions":[
					{"Fn::GetAtt":["FunctionTableAppUpdateItem","FunctionId"]}
				]
			},
			"RequestMappingTemplateS3Location":{
				"Fn::Sub":[
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Mutation.updateUser.req.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			},
			"ResponseMappingTemplateS3Location":{
				"Fn::Sub": [
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Mutation.updateUser.res.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			}
		}
	},
	"MutationDeleteUserResolver":{
		"Type":"AWS::AppSync::Resolver",
		"Properties":{
			"ApiId":{
				"Ref":"AppSyncApiId"
			},
			"TypeName":"Mutation",
			"FieldName":"deleteUser",
			"Kind":"PIPELINE",
			"PipelineConfig":{
				"Functions":[
					{"Fn::GetAtt":["FunctionTableAppDeleteItem","FunctionId"]}
				]
			},
			"RequestMappingTemplateS3Location":{
				"Fn::Sub":[
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.deleteItem.req.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			},
			"ResponseMappingTemplateS3Location":{
				"Fn::Sub": [
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.deleteItem.res.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			}
		}
	},
	"QueryGetUserResolver":{
		"Type":"AWS::AppSync::Resolver",
		"Properties":{
			"ApiId":{
				"Ref":"AppSyncApiId"
			},
			"TypeName":"Query",
			"FieldName":"getUser",
			"Kind":"PIPELINE",
			"PipelineConfig":{
				"Functions":[
					{"Fn::GetAtt":["FunctionTableAppGetItem","FunctionId"]}
				]
			},
			"RequestMappingTemplateS3Location":{
				"Fn::Sub":[
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.getItem.req.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			},
			"ResponseMappingTemplateS3Location":{
				"Fn::Sub": [
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.getItem.res.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			}
		}
	},
	"QueryGetUserByEmailAddressResolver":{
		"Type":"AWS::AppSync::Resolver",
		"Properties":{
			"ApiId":{
				"Ref":"AppSyncApiId"
			},
			"TypeName":"Query",
			"FieldName":"getUserByEmailAddress",
			"Kind":"PIPELINE",
			"PipelineConfig":{
				"Functions":[
					{"Fn::GetAtt":["FunctionSearchManager","FunctionId"]},
					{"Fn::GetAtt":["FunctionTableAppGetItem","FunctionId"]}

				]
			},
			"RequestMappingTemplateS3Location":{
				"Fn::Sub":[
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Query.getUserByEmailAddress.req.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			},
			"ResponseMappingTemplateS3Location":{
				"Fn::Sub": [
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Query.getUserByEmailAddress.res.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			}
		}
	},
	"QueryListUsersResolver":{
		"Type":"AWS::AppSync::Resolver",
		"Properties":{
			"ApiId":{
				"Ref":"AppSyncApiId"
			},
			"DataSourceName":"SearchManager",
			"TypeName":"Query",
			"FieldName":"listUsers",
			"Kind":"UNIT",
			"RequestMappingTemplateS3Location":{
				"Fn::Sub":[
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Query.listUsers.req.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			},
			"ResponseMappingTemplateS3Location":{
				"Fn::Sub": [
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Query.listUsers.res.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			}
		}
	},
	"UserCreatedByResolver":{
		"Type":"AWS::AppSync::Resolver",
		"Properties":{
			"ApiId":{
				"Ref":"AppSyncApiId"
			},
			"TypeName":"User",
			"FieldName":"createdBy",
			"Kind":"PIPELINE",
			"PipelineConfig":{
				"Functions":[
					{"Fn::GetAtt":["FunctionTableAppGetItem","FunctionId"]}
				]
			},
			"RequestMappingTemplateS3Location":{
				"Fn::Sub":[
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.createdBy.req.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			},
			"ResponseMappingTemplateS3Location":{
				"Fn::Sub": [
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.createdBy.res.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			}
		}
	},
	"UserUpdatedByResolver":{
		"Type":"AWS::AppSync::Resolver",
		"Properties":{
			"ApiId":{
				"Ref":"AppSyncApiId"
			},
			"TypeName":"User",
			"FieldName":"updatedBy",
			"Kind":"PIPELINE",
			"PipelineConfig":{
				"Functions":[
					{"Fn::GetAtt":["FunctionTableAppGetItem","FunctionId"]}
				]
			},
			"RequestMappingTemplateS3Location":{
				"Fn::Sub":[
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.updatedBy.req.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			},
			"ResponseMappingTemplateS3Location":{
				"Fn::Sub": [
					"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.updatedBy.res.vtl",
					{
						"S3DeploymentBucket": {
							"Ref": "S3DeploymentBucket"
						},
						"S3DeploymentRootKey": {
							"Ref": "S3DeploymentRootKey"
						}
					}
				]
			}
		}
	},
	"UserConnectionItemsResolver":{
		"Type":"AWS::AppSync::Resolver",
		"Properties":{
			"ApiId":{
				"Ref":"AppSyncApiId"
			},
			"TypeName":"UserConnection",
			"FieldName":"items",
			"Kind":"PIPELINE",
			"PipelineConfig":{
				"Functions":[
					{"Fn::GetAtt":["FunctionTableAppBatchGetItem","FunctionId"]}
				]
			},
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/ItemConnection.items.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/ItemConnection.items.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		},
		"MutationCreateTagResolver":{
			"Type":"AWS::AppSync::Resolver",
			"Properties":{
				"ApiId":{
					"Ref":"AppSyncApiId"
				},
				"TypeName":"Mutation",
				"FieldName":"createTag",
				"Kind":"PIPELINE",
				"PipelineConfig":{
					"Functions":[
						{"Fn::GetAtt":["FunctionTableAppPutItem","FunctionId"]}
					]
				},
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Mutation.createTag.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Mutation.createTag.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		},
		"MutationUpdateTagResolver":{
			"Type":"AWS::AppSync::Resolver",
			"Properties":{
				"ApiId":{
					"Ref":"AppSyncApiId"
				},
				"TypeName":"Mutation",
				"FieldName":"updateTag",
				"Kind":"PIPELINE",
				"PipelineConfig":{
					"Functions":[
						{"Fn::GetAtt":["FunctionTableAppUpdateItem","FunctionId"]}
					]
				},
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Mutation.updateTag.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Mutation.updateTag.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		},
		"MutationDeleteTagResolver":{
			"Type":"AWS::AppSync::Resolver",
			"Properties":{
				"ApiId":{
					"Ref":"AppSyncApiId"
				},
				"TypeName":"Mutation",
				"FieldName":"deleteTag",
				"Kind":"PIPELINE",
				"PipelineConfig":{
					"Functions":[
						{"Fn::GetAtt":["FunctionTableAppDeleteItem","FunctionId"]}
					]
				},
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.deleteItem.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.deleteItem.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		},
		"QueryGetTagResolver":{
			"Type":"AWS::AppSync::Resolver",
			"Properties":{
				"ApiId":{
					"Ref":"AppSyncApiId"
				},
				"TypeName":"Query",
				"FieldName":"getTag",
				"Kind":"PIPELINE",
				"PipelineConfig":{
					"Functions":[
						{"Fn::GetAtt":["FunctionTableAppGetItem","FunctionId"]}
					]
				},
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.getItem.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.getItem.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		},
		"TagCreatedByResolver":{
			"Type":"AWS::AppSync::Resolver",
			"Properties":{
				"ApiId":{
					"Ref":"AppSyncApiId"
				},
				"TypeName":"Tag",
				"FieldName":"createdBy",
				"Kind":"PIPELINE",
				"PipelineConfig":{
					"Functions":[
						{"Fn::GetAtt":["FunctionTableAppGetItem","FunctionId"]}
					]
				},
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.createdBy.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.createdBy.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		},
		"TagUpdatedByResolver":{
			"Type":"AWS::AppSync::Resolver",
			"Properties":{
				"ApiId":{
					"Ref":"AppSyncApiId"
				},
				"TypeName":"Tag",
				"FieldName":"updatedBy",
				"Kind":"PIPELINE",
				"PipelineConfig":{
					"Functions":[
						{"Fn::GetAtt":["FunctionTableAppGetItem","FunctionId"]}
					]
				},
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.updatedBy.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.updatedBy.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		},
		"QueryListTagsResolver":{
			"Type":"AWS::AppSync::Resolver",
			"Properties":{
				"ApiId":{
					"Ref":"AppSyncApiId"
				},
				"DataSourceName":"SearchManager",
				"TypeName":"Query",
				"FieldName":"listTags",
				"Kind":"UNIT",
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Query.listTags.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Query.listTags.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		},
		"TagConnectionItemsResolver":{
			"Type":"AWS::AppSync::Resolver",
			"Properties":{
				"ApiId":{
					"Ref":"AppSyncApiId"
				},
				"TypeName":"TagConnection",
				"FieldName":"items",
				"Kind":"PIPELINE",
				"PipelineConfig":{
					"Functions":[
						{"Fn::GetAtt":["FunctionTableAppBatchGetItem","FunctionId"]}
					]
				},
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/ItemConnection.items.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/ItemConnection.items.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		},
		"MutationCreateCategoryResolver":{
			"Type":"AWS::AppSync::Resolver",
			"Properties":{
				"ApiId":{
					"Ref":"AppSyncApiId"
				},
				"TypeName":"Mutation",
				"FieldName":"createCategory",
				"Kind":"PIPELINE",
				"PipelineConfig":{
					"Functions":[
						{"Fn::GetAtt":["FunctionTableAppPutItem","FunctionId"]}
					]
				},
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Mutation.createCategory.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Mutation.createCategory.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		},
		"MutationUpdateCategoryResolver":{
			"Type":"AWS::AppSync::Resolver",
			"Properties":{
				"ApiId":{
					"Ref":"AppSyncApiId"
				},
				"TypeName":"Mutation",
				"FieldName":"updateCategory",
				"Kind":"PIPELINE",
				"PipelineConfig":{
					"Functions":[
						{"Fn::GetAtt":["FunctionTableAppUpdateItem","FunctionId"]}
					]
				},
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Mutation.updateCategory.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Mutation.updateCategory.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		},
		"MutationDeleteCategoryResolver":{
			"Type":"AWS::AppSync::Resolver",
			"Properties":{
				"ApiId":{
					"Ref":"AppSyncApiId"
				},
				"TypeName":"Mutation",
				"FieldName":"deleteCategory",
				"Kind":"PIPELINE",
				"PipelineConfig":{
					"Functions":[
						{"Fn::GetAtt":["FunctionTableAppDeleteItem","FunctionId"]}
					]
				},
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.deleteItem.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.deleteItem.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		},
		"QueryGetCategoryResolver":{
			"Type":"AWS::AppSync::Resolver",
			"Properties":{
				"ApiId":{
					"Ref":"AppSyncApiId"
				},
				"TypeName":"Query",
				"FieldName":"getCategory",
				"Kind":"PIPELINE",
				"PipelineConfig":{
					"Functions":[
						{"Fn::GetAtt":["FunctionTableAppGetItem","FunctionId"]}
					]
				},
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.getItem.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.getItem.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		},
		
		"CategoryCreatedByResolver":{
			"Type":"AWS::AppSync::Resolver",
			"Properties":{
				"ApiId":{
					"Ref":"AppSyncApiId"
				},
				"TypeName":"Category",
				"FieldName":"createdBy",
				"Kind":"PIPELINE",
				"PipelineConfig":{
					"Functions":[
						{"Fn::GetAtt":["FunctionTableAppGetItem","FunctionId"]}
					]
				},
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.createdBy.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.createdBy.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		},
		"CategoryUpdatedByResolver":{
			"Type":"AWS::AppSync::Resolver",
			"Properties":{
				"ApiId":{
					"Ref":"AppSyncApiId"
				},
				"TypeName":"Category",
				"FieldName":"updatedBy",
				"Kind":"PIPELINE",
				"PipelineConfig":{
					"Functions":[
						{"Fn::GetAtt":["FunctionTableAppGetItem","FunctionId"]}
					]
				},
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.updatedBy.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Item.updatedBy.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		},
		"QueryListCategoriesResolver":{
			"Type":"AWS::AppSync::Resolver",
			"Properties":{
				"ApiId":{
					"Ref":"AppSyncApiId"
				},
				"DataSourceName":"SearchManager",
				"TypeName":"Query",
				"FieldName":"listCategories",
				"Kind":"UNIT",
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Query.listCategories.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/Query.listCategories.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		},
		"CategoryConnectionItemsResolver":{
			"Type":"AWS::AppSync::Resolver",
			"Properties":{
				"ApiId":{
					"Ref":"AppSyncApiId"
				},
				"TypeName":"CategoryConnection",
				"FieldName":"items",
				"Kind":"PIPELINE",
				"PipelineConfig":{
					"Functions":[
						{"Fn::GetAtt":["FunctionTableAppBatchGetItem","FunctionId"]}
					]
				},
				"RequestMappingTemplateS3Location":{
					"Fn::Sub":[
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/ItemConnection.items.req.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				},
				"ResponseMappingTemplateS3Location":{
					"Fn::Sub": [
						"s3://${S3DeploymentBucket}/${S3DeploymentRootKey}/resolvers/ItemConnection.items.res.vtl",
						{
							"S3DeploymentBucket": {
								"Ref": "S3DeploymentBucket"
							},
							"S3DeploymentRootKey": {
								"Ref": "S3DeploymentRootKey"
							}
						}
					]
				}
			}
		}
	},
	"Conditions": {
	  "HasEnvironmentParameter": {
		"Fn::Not": [
		  {
			"Fn::Equals": [
			  {
				"Ref": "env"
			  },
			  "NONE"
			]
		  }
		]
	  },
	  "AlwaysFalse": {
		"Fn::Equals": ["true", "false"]
	  }
	},
	"Outputs": {
	  "EmptyOutput": {
		"Description": "An empty output. You may delete this if you have at least one resource above.",
		"Value": ""
	  }
	}
}
  
  